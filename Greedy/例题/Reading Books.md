https://cses.fi/problemset/task/1631



## Reading Books

------

### 任务

Kotivalo 和 Justiina 要读完所有的书。已知每本书所需的阅读时间。

- 两人阅读一本书时 **必须从头到尾**，并且 **不能同时读同一本书**。
- 求完成所有书籍所需的 **最少总时间**。

------

### 输入

- 第一行：整数 `n`，表示书的数量。
- 第二行：`n` 个整数 `t_1, t_2, …, t_n`，表示每本书的阅读时间。

------

### 输出

- 一个整数：完成所有书籍所需的最小总时间。

------

### 约束

- $1 \le n \le 2 \cdot 10^5$
- $1 \le t_i \le 10^9$

------

### 示例

**输入**

```
3
2 8 3
```

**输出**

```
16
```

------

解释：两人交替安排阅读，使总时间最少。







## 题型分类

这道题属于以下几种题型的组合：

### 1. **贪心算法 (Greedy Algorithm)**

- 核心思想：让两个人**并行读书**，总时间取决于读书时间更长的那个人
- 策略：将书籍分配给两人，使得两人的总阅读时间尽可能接近

### 2. **负载均衡 (Load Balancing)**

- 两个"工人"（Kotivalo 和 Justiina）
- 需要分配"任务"（书籍）
- 目标：最小化完成所有任务的总时间

### 3. **最大值最小化 (Minimize Maximum)**

- 目标：最小化 `max(person1_time, person2_time)`
- 同时考虑至少有一本书必须被两人都读

## 关键观察

### 观察 1：并行阅读

两人可以**同时读不同的书**，所以总时间 = `max(A的总时间, B的总时间)`

### 观察 2：最长的书

**最长的那本书**（设为 `max_book`）必须被两人都读：

- 一个人读的时候，另一个人可以读其他书
- 至少需要 `max_book` 的时间（两人顺序读这本书）

### 观察 3：其余书籍的分配

剩余书籍可以在两人读最长书的"空闲时间"内完成

![](C:\Users\24940\Desktop\C++笔记\greedy\images\1763111319319-b590e94c-ebfa-4080-9988-2da0fde90493_1.jpg)

## 解题思路

### 思路 1：数学公式（最优解）

```cpp
总时间 = max(max_book + max_book, sum)
       = max(2 * max_book, sum)
```

**原理：**

1. **下界 1**：至少需要 `2 * max_book`（两人都要读最长的书）
2. **下界 2**：至少需要 `sum`（所有书的总时间，如果只有一个人读）
3. **答案**：取两者的最大值

### 思路 2：贪心分配

虽然数学公式已经给出答案，但可以理解为：

1. 按书籍时间**降序排序**
2. 最长的书两人都要读（占用 `2 * max_book` 时间）
3. 其余书籍在这段时间内尽可能并行分配

## 代码实现

### C++ 实现

cpp

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(nullptr);
    
    int n;
    cin >> n;
    vector<long long> t(n);
    
    long long sum = 0;
    long long max_book = 0;
    
    for (int i = 0; i < n; i++) {
        cin >> t[i];
        sum += t[i];
        max_book = max(max_book, t[i]);
    }
    
    // 总时间 = max(2 * 最长书, 所有书总和)
    long long result = max(2 * max_book, sum);
    
    cout << result << endl;
    
    return 0;
}
```

## 相关题型

### 1. **任务调度问题**

- 多个处理器分配任务
- 最小化完成时间

### 2. **Partition Problem 变体**

- 将集合分成两部分，使差值最小
- 但这题有额外约束（最长元素必须在两边都出现）

### 3. **双指针/贪心分配**

- 类似"船载重"问题
- 但规则不同

## 关键点总结

```
要点说明
题型贪心 + 数学 + 负载均衡
核心公式max(2 * max_book, sum)
时间复杂度O(n)
关键观察最长的书必须被两人都读
陷阱不要想复杂，不需要排序或DP
数据类型用 long long（sum 可能达到 2e14）
```

## 易错点

❌ **错误 1**：只考虑 `sum / 2`（忽略了最长书的约束）

❌ **错误 2**：认为需要动态规划或复杂的分配算法

❌ **错误 3**：使用 `int` 导致溢出（应该用 `long long`）

✅ **正确**：直接用公式 `max(2 * max_book, sum)`