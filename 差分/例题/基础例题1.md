https://codeforces.com/contest/816/problem/B

## **Karen 和咖啡（Karen and Coffee）**

为了在课堂上保持清醒和专注，Karen 需要喝咖啡！

Karen 是个咖啡爱好者，她想知道冲泡一杯完美咖啡的最佳温度。事实上，她已经花时间阅读了许多食谱书，包括被广泛认可的《The Art of the Covfefe》。

她知道 **n** 个咖啡配方。第 i 个配方建议咖啡应该在 **li 到 ri 度之间（含）** 冲泡，以达到最佳口味。

Karen 认为：
 如果某个温度 **被至少 k 个配方推荐**，则这个温度是“可接受的”（admissible）。

Karen 的想法非常多变，因此她会问你 **q 个问题**。
 在每个问题里，给定她只想在 **a 到 b 度（含）** 之间准备咖啡，你能告诉她这个范围内有多少个“可接受的整数温度”吗？

------

### **输入**

第一行包含三个整数 **n, k, q**

- n：配方数量
- k：一个温度至少需要被多少个配方推荐才算可接受
- q：问题数量
   （1 ≤ k ≤ n ≤ 200000，1 ≤ q ≤ 200000）

接下来 n 行描述配方：
 每行包含两个整数 **li, ri**（1 ≤ li ≤ ri ≤ 200000），表示该配方建议冲泡温度在 li 到 ri 之间（含）。

接下来 q 行描述问题：
 每行包含两个整数 **a, b**（1 ≤ a ≤ b ≤ 200000），表示她想知道在 a 到 b 之间有多少个可接受温度。

------

### **输出**

对于每个问题，输出一行，表示区间 [a, b] 内可接受温度的数量。

------

### **示例**

**输入**

```
3 2 4
91 94
92 97
97 99
92 94
93 97
95 96
90 100
```

**输出**

```
3
3
0
4
```

------

**输入**

```
2 1 1
1 1
200000 200000
90 100
```

**输出**

```
0
```













## 解题思路

步骤1: **差分标记** → 统计每个温度被推荐的次数
步骤2: **前缀和还原** → 得到每个温度的推荐次数
步骤3: 标记+前缀和 → 快速查询区间内 admissible 温度的个数

## 代码实现

```cpp
#include <iostream>
using namespace std;

const int MAXN = 200005;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(nullptr);
    
    int n, k, q;
    cin >> n >> k >> q;
    
    // 步骤1: 差分数组标记区间
    int cnt[MAXN] = {0};
    for (int i = 0; i < n; i++) {
        int l, r;
        cin >> l >> r;
        cnt[l]++;
        cnt[r+1]--;
    }
    
    // 步骤2: 前缀和还原每个温度的推荐次数
    for (int i = 1; i < MAXN; i++) {
        cnt[i] += cnt[i-1];
    }
    
    // 步骤3: 标记 admissible 温度并构建前缀和
    int admissible[MAXN] = {0};
    for (int i = 1; i < MAXN; i++) {
        if (cnt[i] >= k) {
            admissible[i] = 1;
        }
    }
    
    // 构建 admissible 的前缀和
    for (int i = 1; i < MAXN; i++) {
        admissible[i] += admissible[i-1];
    }
    
    // 步骤4: 回答查询
    for (int i = 0; i < q; i++) {
        int a, b;
        cin >> a >> b;
        int result = admissible[b] - admissible[a-1];
        cout << result << '\n';
    }
    
    return 0;
}
```

