# 求和符号 Σ (Sigma) 完全指南

## 目录
1. [基本概念](#基本概念)
2. [标准形式](#标准形式)
3. [基本示例](#基本示例)
4. [重要性质](#重要性质)
5. [常见求和公式](#常见求和公式)
6. [进阶技巧](#进阶技巧)
7. [编程实现](#编程实现)
8. [常见错误](#常见错误)

---

## 基本概念

**求和符号 Σ (Sigma)** 是希腊字母，用于表示一系列数的加法运算。

### 读法
- **符号**：Σ (大写 Sigma)
- **读作**："求和"、"sigma"、"summation"

### 作用
将多个项的加法简化为紧凑的数学表达式。

**例如：**
```
1 + 2 + 3 + 4 + 5 = Σ(i) from i=1 to 5
```

---

## 标准形式

$$\sum_{i=m}^{n} a_i$$

### 各部分说明

```
      n
      Σ    a_i
    i=m
```

- **Σ**：求和符号
- **i**：索引变量（或称为"哑变量"）
- **m**：求和的起始值（下界）
- **n**：求和的终止值（上界）
- **a_i**：第 i 项的通项公式

### 完整读法

> "从 i 等于 m 到 n，对 a_i 求和"
> 
> "Summation of a_i from i equals m to n"

---

## 基本示例

### 示例 1：简单求和

$$\sum_{i=1}^{5} i = 1 + 2 + 3 + 4 + 5 = 15$$

**展开步骤：**
1. i = 1: a₁ = 1
2. i = 2: a₂ = 2
3. i = 3: a₃ = 3
4. i = 4: a₄ = 4
5. i = 5: a₅ = 5
6. 相加：1 + 2 + 3 + 4 + 5 = 15

### 示例 2：平方和

$$\sum_{i=1}^{4} i^2 = 1^2 + 2^2 + 3^2 + 4^2 = 1 + 4 + 9 + 16 = 30$$

### 示例 3：常数求和

$$\sum_{i=1}^{n} c = c + c + c + \cdots + c = nc$$

（c 是常数，加 n 次）

### 示例 4：带系数

$$\sum_{i=1}^{3} 2i = 2(1) + 2(2) + 2(3) = 2 + 4 + 6 = 12$$

### 示例 5：复杂表达式

$$\sum_{k=0}^{3} (2k + 1) = 1 + 3 + 5 + 7 = 16$$

---

## 重要性质

### 1. 线性性质

#### 性质 1.1：常数可以提取
$$\sum_{i=m}^{n} c \cdot a_i = c \sum_{i=m}^{n} a_i$$

**例子：**
$$\sum_{i=1}^{3} 5i = 5\sum_{i=1}^{3} i = 5(1+2+3) = 5 \times 6 = 30$$

#### 性质 1.2：求和可以拆分
$$\sum_{i=m}^{n} (a_i + b_i) = \sum_{i=m}^{n} a_i + \sum_{i=m}^{n} b_i$$

**例子：**
$$\sum_{i=1}^{3} (i + i^2) = \sum_{i=1}^{3} i + \sum_{i=1}^{3} i^2 = 6 + 14 = 20$$

#### 性质 1.3：求和可以拆分（减法）
$$\sum_{i=m}^{n} (a_i - b_i) = \sum_{i=m}^{n} a_i - \sum_{i=m}^{n} b_i$$

### 2. 区间分割

$$\sum_{i=m}^{n} a_i = \sum_{i=m}^{k} a_i + \sum_{i=k+1}^{n} a_i$$

其中 m ≤ k < n

**例子：**
$$\sum_{i=1}^{5} i = \sum_{i=1}^{3} i + \sum_{i=4}^{5} i = 6 + 9 = 15$$

### 3. 索引变换

#### 性质 3.1：索引平移
$$\sum_{i=m}^{n} a_i = \sum_{j=m+k}^{n+k} a_{j-k}$$

**例子：**
$$\sum_{i=1}^{3} i = \sum_{j=2}^{4} (j-1) = 1 + 2 + 3 = 6$$

#### 性质 3.2：索引反向
$$\sum_{i=0}^{n} a_i = \sum_{i=0}^{n} a_{n-i}$$

### 4. 特殊情况

#### 空和（Empty Sum）
$$\sum_{i=m}^{n} a_i = 0 \quad \text{when } n < m$$

#### 单项和
$$\sum_{i=k}^{k} a_i = a_k$$

---

## 常见求和公式

### 1. 前 n 项自然数和

$$\sum_{i=1}^{n} i = 1 + 2 + 3 + \cdots + n = \frac{n(n+1)}{2}$$

**证明：**
- 正向：S = 1 + 2 + 3 + ... + n
- 反向：S = n + (n-1) + (n-2) + ... + 1
- 相加：2S = (n+1) + (n+1) + ... + (n+1) = n(n+1)
- 所以：S = n(n+1)/2

**例子：**
- n=100: Σ = 100×101/2 = 5050

### 2. 前 n 项平方和

$$\sum_{i=1}^{n} i^2 = 1^2 + 2^2 + 3^2 + \cdots + n^2 = \frac{n(n+1)(2n+1)}{6}$$

**例子：**
- n=5: Σ = 5×6×11/6 = 55

### 3. 前 n 项立方和

$$\sum_{i=1}^{n} i^3 = 1^3 + 2^3 + 3^3 + \cdots + n^3 = \left[\frac{n(n+1)}{2}\right]^2$$

**特点：** 立方和等于自然数和的平方！

**例子：**
- n=4: Σ = (4×5/2)² = 10² = 100

### 4. 等差数列求和

$$\sum_{i=0}^{n} (a + id) = (n+1)a + d\frac{n(n+1)}{2}$$

或者：
$$S_n = \frac{n(a_1 + a_n)}{2}$$

**例子：** 2 + 5 + 8 + 11 + 14（首项2，公差3，5项）
- S = 5×(2+14)/2 = 5×16/2 = 40

### 5. 等比数列求和

$$\sum_{i=0}^{n} ar^i = a + ar + ar^2 + \cdots + ar^n = a\frac{r^{n+1}-1}{r-1} \quad (r \neq 1)$$

当 r = 1 时：
$$\sum_{i=0}^{n} a = (n+1)a$$

**例子：** 1 + 2 + 4 + 8 + 16（a=1, r=2, n=4）
- S = 1×(2⁵-1)/(2-1) = 31

### 6. 无穷等比级数（|r| < 1）

$$\sum_{i=0}^{\infty} ar^i = \frac{a}{1-r}$$

**例子：** 1/2 + 1/4 + 1/8 + ...
- S = (1/2)/(1-1/2) = 1

### 7. 常用组合公式

#### 前 n 个奇数和
$$\sum_{i=1}^{n} (2i-1) = 1 + 3 + 5 + \cdots + (2n-1) = n^2$$

#### 前 n 个偶数和
$$\sum_{i=1}^{n} 2i = 2 + 4 + 6 + \cdots + 2n = n(n+1)$$

---

## 进阶技巧

### 1. 双重求和

$$\sum_{i=1}^{m} \sum_{j=1}^{n} a_{ij}$$

**表示：** 对所有 i,j 对求和

**例子：**
$$\sum_{i=1}^{2} \sum_{j=1}^{3} ij = \sum_{i=1}^{2}(i + 2i + 3i) = \sum_{i=1}^{2}6i = 6 + 12 = 18$$

**交换顺序：**
$$\sum_{i=1}^{m} \sum_{j=1}^{n} a_{ij} = \sum_{j=1}^{n} \sum_{i=1}^{m} a_{ij}$$

### 2. 嵌套求和

$$\sum_{i=1}^{n} \sum_{j=i}^{n} 1 = \sum_{i=1}^{n}(n-i+1) = \frac{n(n+1)}{2}$$

**表示：** j 的范围依赖于 i

### 3. 三角形求和

$$\sum_{i=1}^{n} \sum_{j=1}^{i} a_j$$

**可视化：**
```
i=1: a₁
i=2: a₁ + a₂
i=3: a₁ + a₂ + a₃
...
```

### 4. 条件求和

$$\sum_{\substack{1 \leq i \leq n \\ i \text{ 是偶数}}} i$$

**表示：** 只对满足特定条件的 i 求和

### 5. 集合求和

$$\sum_{i \in S} a_i$$

**表示：** 对集合 S 中的所有元素求和

---

## 编程实现

### C++ 实现

```cpp
#include <iostream>
using namespace std;

// 基本求和
int sum_basic(int n) {
    int sum = 0;
    for (int i = 1; i <= n; i++) {
        sum += i;
    }
    return sum;
}

// 使用公式
int sum_formula(int n) {
    return n * (n + 1) / 2;
}

// 平方和
int sum_squares(int n) {
    int sum = 0;
    for (int i = 1; i <= n; i++) {
        sum += i * i;
    }
    return sum;
}

// 平方和公式
int sum_squares_formula(int n) {
    return n * (n + 1) * (2 * n + 1) / 6;
}

// 等比数列求和
double geometric_sum(double a, double r, int n) {
    if (r == 1) return a * (n + 1);
    double sum = 0;
    for (int i = 0; i <= n; i++) {
        sum += a * pow(r, i);
    }
    return sum;
}

// 等比数列公式
double geometric_sum_formula(double a, double r, int n) {
    if (r == 1) return a * (n + 1);
    return a * (pow(r, n + 1) - 1) / (r - 1);
}

// 双重求和
int double_sum(int m, int n) {
    int sum = 0;
    for (int i = 1; i <= m; i++) {
        for (int j = 1; j <= n; j++) {
            sum += i * j;
        }
    }
    return sum;
}

int main() {
    int n = 100;
    
    cout << "Σi (i=1 to " << n << ") = " << sum_formula(n) << endl;
    cout << "Σi² (i=1 to " << n << ") = " << sum_squares_formula(n) << endl;
    
    return 0;
}
```

### Python 实现

```python
# 基本求和
def sum_basic(n):
    return sum(range(1, n + 1))

# 使用公式
def sum_formula(n):
    return n * (n + 1) // 2

# 平方和
def sum_squares(n):
    return sum(i**2 for i in range(1, n + 1))

# 平方和公式
def sum_squares_formula(n):
    return n * (n + 1) * (2 * n + 1) // 6

# 等比数列求和
def geometric_sum(a, r, n):
    if r == 1:
        return a * (n + 1)
    return a * (r**(n + 1) - 1) / (r - 1)

# 双重求和
def double_sum(m, n):
    return sum(i * j for i in range(1, m + 1) 
               for j in range(1, n + 1))

# 条件求和（偶数）
def sum_even(n):
    return sum(i for i in range(1, n + 1) if i % 2 == 0)

# 示例
print(f"Σi (i=1 to 100) = {sum_formula(100)}")
print(f"Σi² (i=1 to 100) = {sum_squares_formula(100)}")
print(f"等比数列 (a=1, r=2, n=10) = {geometric_sum(1, 2, 10)}")
```

---

## 常见错误

### 错误 1：边界混淆

❌ **错误：**
$$\sum_{i=1}^{n} i = \frac{n(n-1)}{2}$$

✅ **正确：**
$$\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$$

### 错误 2：忘记起始值

❌ **错误：**
$$\sum_{i=0}^{n} i = \frac{n(n+1)}{2}$$

✅ **正确：**
$$\sum_{i=0}^{n} i = \frac{n(n+1)}{2}$$

（但要注意从0开始！）

### 错误 3：常数提取错误

❌ **错误：**
$$\sum_{i=1}^{n} (a_i + c) = \sum_{i=1}^{n} a_i + c$$

✅ **正确：**
$$\sum_{i=1}^{n} (a_i + c) = \sum_{i=1}^{n} a_i + nc$$

### 错误 4：乘法不能拆分

❌ **错误：**
$$\sum_{i=1}^{n} (a_i \cdot b_i) = \left(\sum_{i=1}^{n} a_i\right) \cdot \left(\sum_{i=1}^{n} b_i\right)$$

✅ **正确：** 
乘积的和 **不等于** 和的乘积！

**反例：**
- 左边：(1×1) + (2×2) = 1 + 4 = 5
- 右边：(1+2) × (1+2) = 3 × 3 = 9

### 错误 5：索引范围错误

❌ **错误（编程中）：**
```cpp
int sum = 0;
for (int i = 1; i < n; i++) {  // 少算了 n
    sum += i;
}
```

✅ **正确：**
```cpp
int sum = 0;
for (int i = 1; i <= n; i++) {  // 包含 n
    sum += i;
}
```

---

## 实际应用

### 1. 算法分析

**时间复杂度计算：**
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= i; j++) {
        // O(1) 操作
    }
}
```

总操作数：
$$\sum_{i=1}^{n} i = \frac{n(n+1)}{2} = O(n^2)$$

### 2. 数据结构

**前缀和（Prefix Sum）：**
$$\text{prefix}[i] = \sum_{j=0}^{i} a[j]$$

用于快速计算区间和。

### 3. 概率论

**期望值：**
$$E[X] = \sum_{i} x_i \cdot P(X = x_i)$$

### 4. 物理学

**质心计算：**
$$x_{cm} = \frac{\sum_{i=1}^{n} m_i x_i}{\sum_{i=1}^{n} m_i}$$

---

## 练习题

### 基础题

1. 计算 $\sum_{i=1}^{50} i$
2. 计算 $\sum_{i=1}^{10} (2i-1)$
3. 计算 $\sum_{i=1}^{5} 3^i$

### 进阶题

4. 证明 $\sum_{i=1}^{n} (2i-1) = n^2$
5. 计算 $\sum_{i=1}^{n} \sum_{j=1}^{i} j$
6. 简化 $\sum_{i=1}^{n} (i^2 + 2i + 1)$

### 编程题

7. 用代码实现前 n 项调和级数：$\sum_{i=1}^{n} \frac{1}{i}$
8. 计算二维数组所有元素之和
9. 实现条件求和：只对质数位置的元素求和

---

## 参考资料

- **符号来源：** 希腊字母 Σ (Sigma)，由数学家莱昂哈德·欧拉引入
- **英文名称：** Summation notation / Sigma notation
- **相关概念：** 级数 (Series)、序列 (Sequence)、积分 (Integration)

---

## 速查表

| 求和类型 | 公式 |
|---------|------|
| 自然数和 | $\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$ |
| 平方和 | $\sum_{i=1}^{n} i^2 = \frac{n(n+1)(2n+1)}{6}$ |
| 立方和 | $\sum_{i=1}^{n} i^3 = \left[\frac{n(n+1)}{2}\right]^2$ |
| 奇数和 | $\sum_{i=1}^{n} (2i-1) = n^2$ |
| 偶数和 | $\sum_{i=1}^{n} 2i = n(n+1)$ |
| 等比数列 | $\sum_{i=0}^{n} ar^i = a\frac{r^{n+1}-1}{r-1}$ |
| 常数和 | $\sum_{i=1}^{n} c = nc$ |

---

## 记忆技巧

1. **自然数和 = n×平均数** = n × (首项+末项)/2
2. **平方和记住 1/6** 和三个连续数相乘：n(n+1)(2n+1)/6
3. **立方和 = 自然数和的平方**
4. **奇数和 = 完全平方数** (n²)
5. **等比数列要判断 r 是否为 1**

---

希望这份笔记能帮助你全面理解求和符号 Σ！