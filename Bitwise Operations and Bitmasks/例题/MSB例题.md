https://codeforces.com/problemset/problem/1527/A

### **And Then There Were K（题意翻译）**

给定一个整数 **n**，找出最大的整数 **k**，使得以下条件成立：
$$
n\ \&\ (n-1)\ \&\ (n-2)\ \&\ (n-3)\ \& \dots\ \&\ k = 0
$$
其中 **&** 表示按位与运算。

------

### **输入**

第一行包含一个整数 **t**（1 ≤ t ≤ 3⋅10⁴）。接下来有 t 个测试用例。

每个测试用例的第一行包含一个整数 **n**（1 ≤ n ≤ 10⁹）。

------

### **输出**

对于每个测试用例，输出一个整数 —— 所需的最大整数 **k**。

------

### **示例输入**

```
3
2
5
17
```

### **示例输出**

```
1
3
15
```

------

### **说明**

- 在第一个测试用例中，使连续按位与的结果为 0 的最大值是 1。
- 在第二个测试用例中，使连续按位与的结果为 0 的最大值是 3。
   比如更大的值如 4，则
   5 & 4 ≠ 0，
   但 5 & 4 & 3 = 0，
   因此答案是 3。











## 解题思路

m = MSB(最高有效位)

$2^m$ **保证 AND 的结果除了最高位以外的所有位 (较低位) 为 0。**

**$2^m - 1$ 保证 AND 的结果的最高位为 0。**

####  案例 1: $n=2$

1. **找 $2^m$:** 小于等于 2 的最大 2 的幂是 $2^1 = 2$.
2. **计算 $k$:** $k = 2^1 - 1 = \mathbf{1}$.
3. **验证:** $2\ \&\ 1 = 0$.

####  案例 2: $n=5$

1. **找 $2^m$:** 小于等于 5 的最大 2 的幂是 $2^2 = 4$.
2. **计算 $k$:** $k = 2^2 - 1 = \mathbf{3}$.
3. **验证:** $5\ \&\ 4\ \&\ 3 = 101_2\ \&\ 100_2\ \&\ 011_2 = 000_2 = 0$.

#### 案例 3: $n=17$

1. **找 $2^m$:** 小于等于 17 的最大 2 的幂是 $2^4 = 16$.
2. **计算 $k$:** $k = 2^4 - 1 = \mathbf{15}$.
3. **验证:** 序列中包含 $16$ ($10000_2$) 和 $15$ ($01111_2$)，它们共同将所有位清零，结果为 0.



## 代码实现

```cpp
#include <iostream>
#include <cmath>
#include <algorithm>

using namespace std;

void solve() {
    int n;
    cin >> n;

    // 1. 找到小于等于 n 的最大 2 的幂 $2^m$
    // 2^m 是 n 的最高有效位所在的权值
    int power_of_2 = 1;
    // 不断左移 2^m 直到它大于 n
    while ((power_of_2 << 1) <= n) {
        power_of_2 <<= 1;
    }
    
    // 2. 结果是 2^m - 1
    int k = power_of_2 - 1;
    
    cout << k << endl;
}

int main() {
    // 快速 IO
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);

    int t;
    cin >> t;
    while (t--) {
        solve();
    }

    return 0;
}
```



