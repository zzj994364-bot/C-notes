# 排列组合详尽笔记

## 一、基本概念

### 1.1 两个基本计数原理

**加法原理（分类计数原理）** 完成一件事有n类方法,第1类方法有m₁种,第2类方法有m₂种,...,第n类方法有mₙ种,那么完成这件事共有 m₁ + m₂ + ... + mₙ 种方法。

关键词:分类、互斥、求和

**乘法原理(分步计数原理)** 完成一件事需要n个步骤,第1步有m₁种方法,第2步有m₂种方法,...,第n步有mₙ种方法,那么完成这件事共有 m₁ × m₂ × ... × mₙ 种方法。

关键词:分步、相继、求积

### 1.2 排列与组合的定义

**排列(Permutation)** 从n个不同元素中取出m个元素(m ≤ n),按照一定顺序排成一列,叫做从n个不同元素中取出m个元素的一个排列。

特点:与顺序有关

**组合(Combination)** 从n个不同元素中取出m个元素(m ≤ n),不考虑其顺序,组成一组,叫做从n个不同元素中取出m个元素的一个组合。

特点:与顺序无关

## 二、排列

### 2.1 排列数公式

从n个不同元素中取出m个元素的所有排列的个数,记为 A(n,m) 或 Pₙᵐ 或 P(n,m)。

**排列数公式:**
$$
A_n^m = n(n-1)(n-2)...(n-m+1) = \frac{n!}{(n-m)!}
$$
**特殊情况:**

- 全排列:A(n,n) = n!
- A(n,0) = 1(规定)
- A(n,1) = n

### 2.2 排列的性质

1. A(n,m) = n × A(n-1,m-1)
2. A(n,m) = n × (n-1) × A(n-2,m-2)
3. m × A(n,m) = n × A(n-1,m-1)

### 2.3 常见排列问题

**特殊元素优先法** 某些元素必须在特定位置或不能在特定位置时,先安排这些特殊元素。

例:5个人排队,甲不能站两端,有多少种排法? 解:先排两端(从除甲外的4人中选):A(4,2) = 12 再排中间3个位置:A(3,3) = 6 共 12 × 6 = 72种

**相邻问题捆绑法** 要求某些元素必须相邻时,先将相邻元素看作一个整体。

例:5个人排队,甲乙必须相邻,有多少种排法? 解:将甲乙捆绑为一个元素:A(4,4) = 24 甲乙内部排列:A(2,2) = 2 共 24 × 2 = 48种

**不相邻问题插空法** 要求某些元素不相邻时,先排其他元素,再将要求不相邻的元素插入空隙。

例:5个人排队,甲乙不能相邻,有多少种排法? 解:全排列减去相邻的情况:A(5,5) - 48 = 120 - 48 = 72种 或:先排其他3人:A(3,3) = 6,产生4个空隙,从中选2个:A(4,2) = 12,共 6 × 12 = 72种

**定序问题倍除法** n个元素全排列,但其中m个元素顺序固定,结果为 n!/m!

例:5个人排队,甲乙丙三人的相对顺序不变,有多少种排法? 解:A(5,5) / A(3,3) = 120 / 6 = 20种

**分组分配问题** 将n个元素分成若干组,需注意是否有顺序要求。

## 三、组合

### 3.1 组合数公式

从n个不同元素中取出m个元素的所有组合的个数,记为 C(n,m) 或 Cₙᵐ 或 (n m)。

**组合数公式:**
$$
C_n^m = \frac{A_n^m}{A_m^m} = \frac{n!}{m!(n-m)!} = \frac{n(n-1)...(n-m+1)}{m!}
$$
**特殊情况:**

- C(n,0) = 1
- C(n,1) = n
- C(n,n) = 1
- C(n,m) = C(n,n-m)(对称性)

### 3.2 组合数的性质

1. **对称性:** C(n,m) = C(n,n-m)
2. **递推公式:** C(n,m) = C(n-1,m) + C(n-1,m-1)
   - 含义:从n个元素中取m个,可分为包含某特定元素和不包含该元素两类
3. **吸收恒等式:** C(n,m) = (n/m) × C(n-1,m-1)
4. **范德蒙德恒等式:** C(m+n,r) = Σ C(m,k) × C(n,r-k) (k从0到r)
5. **二项式系数和:**
   - C(n,0) + C(n,1) + ... + C(n,n) = 2ⁿ
   - C(n,0) + C(n,2) + C(n,4) + ... = C(n,1) + C(n,3) + C(n,5) + ... = 2ⁿ⁻¹

### 3.3 常见组合问题

**直接法** 直接按组合数公式计算。

**间接法(排除法)** 用总数减去不符合条件的情况数。

例:从10人中选5人,甲乙不能同时入选,有多少种选法? 解:C(10,5) - C(8,3) = 252 - 56 = 196种

**分类讨论** 按某个元素是否被选中分类。

例:从5个男生、4个女生中选5人,至少有2个女生,有多少种选法? 解:2女3男:C(4,2) × C(5,3) = 6 × 10 = 60 3女2男:C(4,3) × C(5,2) = 4 × 10 = 40 4女1男:C(4,4) × C(5,1) = 1 × 5 = 5 共 60 + 40 + 5 = 105种

## 四、二项式定理

### 4.1 二项式定理公式

$$
(a+b)^n = \sum_{k=0}^{n} C_n^k a^{n-k}b^k = C_n^0 a^n + C_n^1 a^{n-1}b + ... + C_n^n b^n
$$

其中 C(n,k) 称为二项式系数。

### 4.2 二项式定理的性质

1. **通项公式:** Tₖ₊₁ = C(n,k) × aⁿ⁻ᵏ × bᵏ (第k+1项)
2. **二项式系数的性质:**
   - 对称性:与首末等距离的两项的二项式系数相等
   - 增减性与最大值:
     - 当k < (n+1)/2时,二项式系数递增
     - 当k > (n+1)/2时,二项式系数递减
     - 当n为偶数时,中间一项 C(n,n/2) 最大
     - 当n为奇数时,中间两项 C(n,(n-1)/2) 和 C(n,(n+1)/2) 最大
3. **系数和:**
   - 令a=b=1:(a+b)ⁿ = 2ⁿ = C(n,0) + C(n,1) + ... + C(n,n)
   - 令a=1,b=-1:(a+b)ⁿ = 0 = C(n,0) - C(n,1) + C(n,2) - ... + (-1)ⁿC(n,n)

### 4.3 求特定项或系数

**求某一项:** 根据通项公式,确定k值,代入计算。

例:求(x + 2)⁸展开式中x⁵的系数 解:Tₖ₊₁ = C(8,k) × x⁸⁻ᵏ × 2ᵏ 令8-k=5,得k=3 系数为 C(8,3) × 2³ = 56 × 8 = 448

**求某项的系数:** 注意区分"二项式系数"和"项的系数"。

## 五、重复排列与组合

### 5.1 可重复排列

从n个不同元素中可重复地取出m个元素的排列数为 nᵐ。

例:3个数字0,1,2可组成多少个三位数? 解:百位有2种选择(1或2),十位和个位各有3种选择,共 2 × 3 × 3 = 18个

### 5.2 可重复组合

从n个不同元素中可重复地取出m个元素的组合数为 C(n+m-1,m)。

推导:相当于将m个相同的球放入n个不同的盒子,用隔板法。

### 5.3 不尽相异元素的排列

n个元素中有 n₁ 个相同元素1,n₂ 个相同元素2,...,nₖ 个相同元素k(n₁+n₂+...+nₖ=n),则这n个元素的全排列数为:
$$
\frac{n!}{n_1! \times n_2! \times ... \times n_k!}
$$
例:"STATISTICS"的字母全排列数 解:共10个字母,其中S-3个,T-3个,A-1个,I-2个,C-1个 排列数 = 10!/(3! × 3! × 2!) = 50400

## 六、分组分配问题

### 6.1 平均分组问题

将n个不同元素平均分成m组(每组k个,n=mk),分组数为:
$$
\frac{C_n^k \times C_{n-k}^k \times ... \times C_k^k}{m!}
$$
注意:因为各组间无差别,要除以m!

### 6.2 不平均分组问题

将n个不同元素分成若干组(每组元素个数不全相同),直接用组合数连乘,不需要除以阶乘。

### 6.3 分配问题

如果分组后还要分配到不同的位置,需要再乘以分配的排列数。

例:6本不同的书平均分给甲乙丙三人,有多少种分法? 解:先分组:C(6,2) × C(4,2) × C(2,2) / 3! = 15 再分配:15 × 3! = 90种

如果是"6本书分成3堆,每堆2本",则只需分组,答案为15种。

## 七、常见模型与技巧

### 7.1 隔板法

将n个相同元素分成m份(每份至少1个),方案数为 C(n-1,m-1)。

理解:n个元素排成一排,有n-1个空隙,选m-1个位置插入隔板。

### 7.2 错位排列

n个元素的错位排列数 Dₙ (即每个元素都不在原位置):
$$
D_n = n! \times (1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + ... + \frac{(-1)^n}{n!})
$$
递推公式:Dₙ = (n-1)(Dₙ₋₁ + Dₙ₋₂)

前几项:D₁=0, D₂=1, D₃=2, D₄=9, D₅=44

### 7.3 圆排列

n个不同元素的圆排列数为 (n-1)!/2 (不区分顺时针和逆时针) 或 (n-1)! (区分方向)。

### 7.4 容斥原理

计算至少满足一个条件的方案数: |A∪B∪C| = |A| + |B| + |C| - |A∩B| - |A∩C| - |B∩C| + |A∩B∩C|

### 7.5 分步计数

复杂问题分成几个独立步骤,每步计数后相乘。

## 八、解题策略

### 8.1 判断排列还是组合

关键:看是否与顺序有关

- 有序 → 排列
- 无序 → 组合

### 8.2 解题步骤

1. 明确要完成的事情
2. 分析是分类还是分步(加法或乘法原理)
3. 判断是排列还是组合
4. 考虑特殊条件(相邻、不相邻、特殊位置等)
5. 选择合适的方法(直接法、间接法等)
6. 计算并检验

### 8.3 常用技巧总结

- 特殊元素、特殊位置优先考虑
- 相邻用捆绑,不相邻用插空
- 定序用倍除,分组注意是否平均
- 复杂问题用分类讨论或间接法
- 注意区分"至少"、"至多"、"恰好"
- 灵活运用排列组合的转换关系

## 九、经典例题

**例1:涂色问题** 用4种颜色给正方体6个面涂色,每面涂一种颜色,相邻面颜色不同,有多少种涂法?

**例2:错排信封** 5封不同的信装入5个不同的信封,恰好全部装错的方法数? 解:D₅ = 44种

**例3:分配问题** 5个不同的小球放入3个不同的盒子,每个盒子至少1个球,有多少种方法? 解:用容斥原理或第二类斯特林数,答案为 3! × S(5,3) = 6 × 25 = 150

**例4:多项式系数** (x+y+z)ⁿ展开式中xᵃyᵇzᶜ的系数为 n!/(a!b!c!) (其中a+b+c=n)

## 十、公式速查表

```
名称公式
排列数A(n,m) = n!/(n-m)!
组合数C(n,m) = n!/[m!(n-m)!]
全排列n!
可重复排列nᵐ
可重复组合C(n+m-1,m)
圆排列(n-1)!
隔板法C(n-1,m-1)
错位排列Dₙ=(n-1)(Dₙ₋₁+Dₙ₋₂)
二项式定理(a+b)ⁿ = Σ C(n,k)aⁿ⁻ᵏbᵏ
```